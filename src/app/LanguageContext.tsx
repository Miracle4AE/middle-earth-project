"use client";
import React, { createContext, useContext, useState, useEffect } from 'react';

type Language = 'tr' | 'en';

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

// Ã‡eviri verileri
const translations = {
  tr: {
    // Navbar
    'home': 'Anasayfa',
    'characters': 'Karakterler',
    'stories': 'Hikayeler',
    'gallery': 'Galeri',
    'map': 'Harita',
    'shop': 'ÃœrÃ¼nlerimiz',
    'login': 'GiriÅŸ Yap',
    'register': 'KayÄ±t Ol',
    'profile': 'Profilim',
    'cart': 'Sepetim',
    'orders': 'SipariÅŸlerim',
    'requests': 'Soru ve Taleplerim',
    'offers': 'Sana Ã–zel FÄ±rsatlar',
    'profile_info': 'KullanÄ±cÄ± Bilgilerim',
    'reviews': 'DeÄŸerlendirmelerim',
    'favorites': 'BeÄŸendiklerim',
    'no_favorites': 'HenÃ¼z beÄŸendiÄŸiniz bir Ã¼rÃ¼n yok.',
    'my_reviews': 'DeÄŸerlendirmelerim',
    'no_reviews': 'HenÃ¼z bir yorumunuz yok.',
    'all_lists': 'TÃœM LÄ°STELERÄ°M',
    'favorite_lists': 'Favori Listelerim',
    'shopping_lists': 'AlÄ±ÅŸveriÅŸ Listelerim',
    'compare_list': 'KarÅŸÄ±laÅŸtÄ±rma Listem',
    'reviewed_products': 'YorumladÄ±ÄŸÄ±m ÃœrÃ¼nler',
    'shared_lists': 'PaylaÅŸÄ±lan Listelerim',
    'new_list': '+ Yeni Liste',
    'create': 'OluÅŸtur',
    'list_name_placeholder': 'Liste adÄ± girin...',
    'lists': 'TÃ¼m Listelerim',
    'logout': 'Ã‡Ä±kÄ±ÅŸ Yap',
    'hello': 'Merhaba',
    'menu': 'MenÃ¼yÃ¼ AÃ§/Kapat',
    
    // Dil seÃ§enekleri
    'language': 'Dil',
    'turkish': 'TÃ¼rkÃ§e',
    'english': 'Ä°ngilizce',

    // Ana Sayfa
    'welcome_title': 'Orta DÃ¼nya\'ya HoÅŸ Geldiniz',
    'welcome_subtitle': 'YÃ¼zÃ¼klerin Efendisi\'nin bÃ¼yÃ¼lÃ¼ dÃ¼nyasÄ±na adÄ±m atÄ±n',
    'explore_button': 'YÃ¼zÃ¼ÄŸÃ¼ KeÅŸfet',
    'explore_characters': 'Karakterleri KeÅŸfet',
    'explore_stories': 'Hikayeleri KeÅŸfet',
    'explore_gallery': 'Galeriyi KeÅŸfet',
    'explore_map': 'HaritayÄ± KeÅŸfet',
    'explore_shop': 'ÃœrÃ¼nleri KeÅŸfet',
    'learn_more': 'Daha Fazla Bilgi',
    'characters_title': 'Efsanevi Karakterler',
    'characters_subtitle': 'Orta DÃ¼nya\'nÄ±n en unutulmaz kahramanlarÄ± ve kÃ¶tÃ¼leri',
    'good_characters': 'Ä°yi Karakterler',
    'evil_characters': 'KÃ¶tÃ¼ Karakterler',
    'stories_title': 'DestansÄ± Hikayeler',
    'stories_subtitle': 'Orta DÃ¼nya\'nÄ±n en bÃ¼yÃ¼k maceralarÄ±',
    'gallery_title': 'Galeri',
    'gallery_subtitle': 'Orta DÃ¼nya\'nÄ±n en gÃ¼zel gÃ¶rselleri',
    'map_title': 'Orta DÃ¼nya HaritasÄ±',
    'map_subtitle': 'BÃ¼yÃ¼lÃ¼ topraklarÄ± keÅŸfedin',
    'shop_title': 'ÃœrÃ¼nlerimiz',
    'shop_subtitle': 'Orta DÃ¼nya\'dan Ã¶zel Ã¼rÃ¼nler',
    'view_all': 'TÃ¼mÃ¼nÃ¼ GÃ¶r',
    'add_to_cart': 'Sepete Ekle',
    'price': 'Fiyat',
    'category': 'Kategori',
    // Shop kategorileri
    'rings': 'YÃ¼zÃ¼kler',
    'swords': 'KÄ±lÄ±Ã§lar',
    'cloaks': 'Pelerinler',
    'maps': 'Haritalar',
    'figures': 'FigÃ¼rler',
    'elf_jewelry': 'Elf TakÄ±larÄ±',
    'books': 'Orta DÃ¼nya KitaplarÄ±',
    'hobbit_items': 'Hobbit EÅŸyalarÄ±',
    'elf_bows': 'Elf YaylarÄ±',
    'dwarf_axes': 'CÃ¼ce BaltalarÄ±',
    'nazgul_masks': 'NazgÃ»l Maskeleri',
    'orc_armors': 'Ork ZÄ±rhlarÄ±',
    'wizard_staffs': 'BÃ¼yÃ¼cÃ¼ AsalarÄ±',
    'gondor_helmets': 'Gondor MiÄŸferleri',
    'rohan_horses': 'Rohan At FigÃ¼rleri',
    'posters': 'Orta DÃ¼nya Posterleri',
    'cards': 'Koleksiyon KartlarÄ±',
    'collection_figures': 'Koleksiyon FigÃ¼rleri',
    'home_office': 'Ev & Ofis',
    'accessories': 'Aksesuar & TakÄ±',
    'clothes': 'KÄ±yafet',
    'games_puzzles': 'Oyun & Puzzle',
    'kitchen': 'Mutfak',
    'coins_replicas': 'Koleksiyon ParalarÄ± & Replikalar',
    'plush_toys': 'PeluÅŸ & Oyuncak',
    // Shop butonlarÄ±
    'buy_now': 'SatÄ±n Al',
    'checkout': 'Ã–deme',
    'cart_summary': 'Sepetiniz',
    'no_cart_items': 'Sepetinizde Ã¼rÃ¼n yok.',
    'total': 'Toplam',
    'card_info': 'Kart Bilgileri',
    'card_name_placeholder': 'Kart Ãœzerindeki Ä°sim',
    'card_number_placeholder': 'Kart NumarasÄ±',
    'expiry_placeholder': 'AA/YY',
    'cvc_placeholder': 'CVC',
    'email_placeholder': 'E-posta',
    'address_placeholder': 'Teslimat Adresi',
    'complete_payment': 'Ã–demeyi Tamamla',
    'payment_success': 'Ã–deme BaÅŸarÄ±lÄ±!',
    'payment_success_desc': 'SipariÅŸin alÄ±ndÄ±, Orta DÃ¼nya\'ya hoÅŸ geldin! ğŸ§™â€â™‚ï¸',
    'go_home': 'Anasayfaya DÃ¶n',
    // Profil menÃ¼sÃ¼
    'orders_title': 'SipariÅŸlerim',
    'order_number': 'SipariÅŸ',
    'order_date': 'Tarih',
    'order_status_delivered': 'Teslim Edildi',
    'order_status_shipping': 'Kargoda',
    'order_status_preparing': 'HazÄ±rlanÄ±yor',
    'order_status_cancelled': 'Ä°ptal Edildi',
    'order_status_pending': 'Beklemede',
    'delivery_address': 'Teslimat Adresi',
    'total_amount': 'Toplam Tutar',
    'ordered_products': 'SipariÅŸ Edilen ÃœrÃ¼nler',
    'order_loading': 'YÃ¼kleniyor...',
    'order_none': 'HenÃ¼z bir sipariÅŸiniz yok.',
    'order_first_cta': 'Ä°lk sipariÅŸinizi vermek iÃ§in',
    'order_first_link': 'Ã¼rÃ¼nlerimizi',
    'order_first_end': 'inceleyin.',
    'order_product_none': 'ÃœrÃ¼n bilgisi bulunamadÄ±.',
    'currency_try': 'â‚º',
    'currency_usd': '$',
    'requests_title': 'Soru ve Taleplerim',
    'requests_help_title': 'Size nasÄ±l yardÄ±mcÄ± olabiliriz?',
    'requests_help_sub': 'SorularÄ±nÄ±zÄ± ve taleplerinizi buradan iletebilirsiniz.',
    'select_category': 'Kategori seÃ§iniz',
    'category_product': 'ÃœrÃ¼n Bilgisi',
    'category_order': 'SipariÅŸ Durumu',
    'category_return': 'Ä°ade/DeÄŸiÅŸim',
    'category_technical': 'Teknik Destek',
    'category_suggestion': 'Ã–neri/Åikayet',
    'category_other': 'DiÄŸer',
    'subject_placeholder': 'MesajÄ±nÄ±zÄ±n konusu',
    'priority_low': 'DÃ¼ÅŸÃ¼k',
    'priority_normal': 'Normal',
    'priority_high': 'YÃ¼ksek',
    'priority_urgent': 'Acil',
    'message_placeholder': 'DetaylÄ± mesajÄ±nÄ±zÄ± buraya yazÄ±n...',
    'send_message': 'MesajÄ± GÃ¶nder',
    'sending': 'GÃ¶nderiliyor...',
    'contact_info': 'Ä°letiÅŸim Bilgileri',
    'work_hours': 'Ã‡alÄ±ÅŸma Saatleri',
    'past_requests': 'GeÃ§miÅŸ Talepleriniz',
    'no_requests': 'HenÃ¼z bir soru veya talebiniz yok.',
    'topic': 'Konu',
    'your_message': 'MesajÄ±nÄ±z',
    'reply': 'YanÄ±t',
    'pending': 'Beklemede',
    'answered': 'YanÄ±tlandÄ±',
    'required_fields': 'LÃ¼tfen tÃ¼m zorunlu alanlarÄ± doldurun.',
    'user_not_found': 'KullanÄ±cÄ± bulunamadÄ±.',
    'db_error': 'Firestore baÄŸlantÄ±sÄ± kurulamadÄ±.',
    'send_success': 'MesajÄ±nÄ±z baÅŸarÄ±yla gÃ¶nderildi! En kÄ±sa sÃ¼rede size dÃ¶nÃ¼ÅŸ yapacaÄŸÄ±z.',
    'send_error': 'Bir hata oluÅŸtu. LÃ¼tfen tekrar deneyin.',
    // --- OFFERS PAGE ---
    'loading': 'YÃ¼kleniyor...',
    'no_offers': 'Åu anda sana Ã¶zel bir fÄ±rsat yok.',
    'follow_for_offers': 'Yeni fÄ±rsatlar iÃ§in bizi takip etmeye devam edin!',
    'coupon_code': 'Kupon Kodu',
    'expiry_date': 'Son KullanÄ±m Tarihi',
    'min_amount': 'Minimum Tutar',
    'start_shopping': 'AlÄ±ÅŸveriÅŸe BaÅŸla',
    'copy_code': 'Kodu Kopyala',
    'offers_email_tip': 'FÄ±rsatlarÄ± kaÃ§Ä±rmamak iÃ§in e-posta bildirimlerini aÃ§mayÄ± unutmayÄ±n!',
    'discount': 'Ä°ndirim',
    'shipping': 'Kargo',
    'gift': 'Hediye',
    'offer': 'FÄ±rsat',
    // --- PROFILE PAGE ---
    'profile_tab_info': 'Ãœyelik Bilgilerim',
    'profile_tab_password': 'Åifre DeÄŸiÅŸikliÄŸi',
    'profile_tab_prefs': 'Ä°letiÅŸim Tercihlerim',
    'profile_tab_addresses': 'Adreslerim',
    'profile_tab_update': 'Bilgilerimi GÃ¼ncelle',
    'first_name': 'Ad',
    'last_name': 'Soyad',
    'birth_date': 'DoÄŸum Tarihi',
    'gender_select': 'Cinsiyet (seÃ§iniz)',
    'gender_male': 'Erkek',
    'gender_female': 'KadÄ±n',
    'gender_other': 'DiÄŸer',
    'phone_number': 'Telefon NumarasÄ±',
    'email_address': 'Mail Adresi',
    'profile_info_note': 'Bilgiler sadece ilk kayÄ±t sÄ±rasÄ±nda doldurulabilir. GÃ¼ncellemek iÃ§in "Bilgilerimi GÃ¼ncelle" sekmesini kullan.',
    'address_title': 'Adres BaÅŸlÄ±ÄŸÄ±',
    'country_turkey': 'TÃ¼rkiye',
    'city': 'Åehir',
    'district': 'Ä°lÃ§e',
    'address_detail': 'AÃ§Ä±k Adres',
    'add': 'Ekle',
    'adding': 'Ekleniyor...',
    'saved_addresses': 'KayÄ±tlÄ± Adresler:',
    'no_addresses': 'HenÃ¼z adres eklemediniz.',
    'delete': 'Sil',
    'password': 'Åifre',
    'current_password': 'Mevcut Åifre',
    'new_password': 'Yeni Åifre',
    'checking': 'Kontrol Ediliyor...',
    'continue': 'Devam Et',
    'update': 'GÃ¼ncelle',
    'updating': 'GÃ¼ncelleniyor...',
    'verifying': 'DoÄŸrulanÄ±yor...',
    'save': 'Kaydet',
    'saving': 'Kaydediliyor...',
    'sms_channel': 'AnlÄ±k/KÄ±sa Mesaj KanallarÄ±',
    'email_channel': 'E-Posta',
    'phone_channel': 'Telefon AramasÄ±',
  },
  en: {
    // Navbar
    'home': 'Home',
    'characters': 'Characters',
    'stories': 'Stories',
    'gallery': 'Gallery',
    'map': 'Map',
    'shop': 'Shop',
    'login': 'Login',
    'register': 'Register',
    'profile': 'Profile',
    'cart': 'Cart',
    'orders': 'My Orders',
    'requests': 'Questions & Requests',
    'offers': 'Special Offers',
    'profile_info': 'User Info',
    'reviews': 'My Reviews',
    'favorites': 'Favorites',
    'no_favorites': 'You have not favorited any products yet.',
    'my_reviews': 'My Reviews',
    'no_reviews': 'You have not written any reviews yet.',
    'all_lists': 'ALL MY LISTS',
    'favorite_lists': 'Favorite Lists',
    'shopping_lists': 'Shopping Lists',
    'compare_list': 'Compare List',
    'reviewed_products': 'Reviewed Products',
    'shared_lists': 'Shared Lists',
    'new_list': '+ New List',
    'create': 'Create',
    'list_name_placeholder': 'Enter list name...',
    'lists': 'All Lists',
    'logout': 'Logout',
    'hello': 'Hello',
    'menu': 'Toggle Menu',
    
    // Dil seÃ§enekleri
    'language': 'Language',
    'turkish': 'Turkish',
    'english': 'English',

    // Ana Sayfa
    'welcome_title': 'Welcome to Middle-earth',
    'welcome_subtitle': 'Step into the magical world of The Lord of the Rings',
    'explore_button': 'Explore the Ring',
    'explore_characters': 'Explore Characters',
    'explore_stories': 'Explore Stories',
    'explore_gallery': 'Explore Gallery',
    'explore_map': 'Explore the Map',
    'explore_shop': 'Explore Products',
    'learn_more': 'Learn More',
    'characters_title': 'Legendary Characters',
    'characters_subtitle': 'Middle-earth\'s most unforgettable heroes and villains',
    'good_characters': 'Good Characters',
    'evil_characters': 'Evil Characters',
    'stories_title': 'Epic Stories',
    'stories_subtitle': 'Middle-earth\'s greatest adventures',
    'gallery_title': 'Gallery',
    'gallery_subtitle': 'Middle-earth\'s most beautiful images',
    'map_title': 'Middle-earth Map',
    'map_subtitle': 'Explore the magical lands',
    'shop_title': 'Our Products',
    'shop_subtitle': 'Special products from Middle-earth',
    'view_all': 'View All',
    'add_to_cart': 'Add to Cart',
    'price': 'Price',
    'category': 'Category',
    // Shop kategorileri
    'rings': 'Rings',
    'swords': 'Swords',
    'cloaks': 'Cloaks',
    'maps': 'Maps',
    'figures': 'Figures',
    'elf_jewelry': 'Elf Jewelry',
    'books': 'Middle-earth Books',
    'hobbit_items': 'Hobbit Items',
    'elf_bows': 'Elf Bows',
    'dwarf_axes': 'Dwarf Axes',
    'nazgul_masks': 'NazgÃ»l Masks',
    'orc_armors': 'Orc Armors',
    'wizard_staffs': 'Wizard Staffs',
    'gondor_helmets': 'Gondor Helmets',
    'rohan_horses': 'Rohan Horse Figures',
    'posters': 'Middle-earth Posters',
    'cards': 'Collection Cards',
    'collection_figures': 'Collection Figures',
    'home_office': 'Home & Office',
    'accessories': 'Accessories & Jewelry',
    'clothes': 'Clothes',
    'games_puzzles': 'Games & Puzzles',
    'kitchen': 'Kitchen',
    'coins_replicas': 'Coins & Replicas',
    'plush_toys': 'Plush & Toys',
    // Shop butonlarÄ±
    'buy_now': 'Buy Now',
    'checkout': 'Checkout',
    'cart_summary': 'Your Cart',
    'no_cart_items': 'Your cart is empty.',
    'total': 'Total',
    'card_info': 'Card Information',
    'card_name_placeholder': 'Name on Card',
    'card_number_placeholder': 'Card Number',
    'expiry_placeholder': 'MM/YY',
    'cvc_placeholder': 'CVC',
    'email_placeholder': 'Email',
    'address_placeholder': 'Shipping Address',
    'complete_payment': 'Complete Payment',
    'payment_success': 'Payment Successful!',
    'payment_success_desc': 'Your order has been received, welcome to Middle-earth! ğŸ§™â€â™‚ï¸',
    'go_home': 'Return to Home',
    // Profil menÃ¼sÃ¼
    'orders_title': 'My Orders',
    'order_number': 'Order',
    'order_date': 'Date',
    'order_status_delivered': 'Delivered',
    'order_status_shipping': 'Shipped',
    'order_status_preparing': 'Preparing',
    'order_status_cancelled': 'Cancelled',
    'order_status_pending': 'Pending',
    'delivery_address': 'Delivery Address',
    'total_amount': 'Total Amount',
    'ordered_products': 'Ordered Products',
    'order_loading': 'Loading...',
    'order_none': 'You have no orders yet.',
    'order_first_cta': 'To place your first order,',
    'order_first_link': 'check our products',
    'order_first_end': '.',
    'order_product_none': 'No product information found.',
    'currency_try': 'â‚º',
    'currency_usd': '$',
    'requests_title': 'Questions & Requests',
    'requests_help_title': 'How can we help you?',
    'requests_help_sub': 'You can send your questions and requests here.',
    'select_category': 'Select category',
    'category_product': 'Product Info',
    'category_order': 'Order Status',
    'category_return': 'Return/Exchange',
    'category_technical': 'Technical Support',
    'category_suggestion': 'Suggestion/Complaint',
    'category_other': 'Other',
    'subject_placeholder': 'Subject of your message',
    'priority_low': 'Low',
    'priority_normal': 'Normal',
    'priority_high': 'High',
    'priority_urgent': 'Urgent',
    'message_placeholder': 'Write your detailed message here...',
    'send_message': 'Send Message',
    'sending': 'Sending...',
    'contact_info': 'Contact Information',
    'work_hours': 'Working Hours',
    'past_requests': 'Your Past Requests',
    'no_requests': 'You have no questions or requests yet.',
    'topic': 'Topic',
    'your_message': 'Your Message',
    'reply': 'Reply',
    'pending': 'Pending',
    'answered': 'Answered',
    'required_fields': 'Please fill in all required fields.',
    'user_not_found': 'User not found.',
    'db_error': 'Could not connect to Firestore.',
    'send_success': 'Your message has been sent successfully! We will get back to you as soon as possible.',
    'send_error': 'An error occurred. Please try again.',
    // --- OFFERS PAGE ---
    'loading': 'Loading...',
    'no_offers': 'There are no special offers for you at the moment.',
    'follow_for_offers': 'Keep following us for new offers!',
    'coupon_code': 'Coupon Code',
    'expiry_date': 'Expiry Date',
    'min_amount': 'Minimum Amount',
    'start_shopping': 'Start Shopping',
    'copy_code': 'Copy Code',
    'offers_email_tip': 'Don\'t forget to enable email notifications to not miss any offers!',
    'discount': 'Discount',
    'shipping': 'Shipping',
    'gift': 'Gift',
    'offer': 'Offer',
    // --- PROFILE PAGE ---
    'profile_tab_info': 'Membership Info',
    'profile_tab_password': 'Change Password',
    'profile_tab_prefs': 'Contact Preferences',
    'profile_tab_addresses': 'My Addresses',
    'profile_tab_update': 'Update Info',
    'first_name': 'First Name',
    'last_name': 'Last Name',
    'birth_date': 'Birth Date',
    'gender_select': 'Gender (select)',
    'gender_male': 'Male',
    'gender_female': 'Female',
    'gender_other': 'Other',
    'phone_number': 'Phone Number',
    'email_address': 'Email Address',
    'profile_info_note': 'Info can only be filled during registration. Use the "Update Info" tab to update.',
    'address_title': 'Address Title',
    'country_turkey': 'Turkey',
    'city': 'City',
    'district': 'District',
    'address_detail': 'Full Address',
    'add': 'Add',
    'adding': 'Adding...',
    'saved_addresses': 'Saved Addresses:',
    'no_addresses': 'You have not added any address yet.',
    'delete': 'Delete',
    'password': 'Password',
    'current_password': 'Current Password',
    'new_password': 'New Password',
    'checking': 'Checking...',
    'continue': 'Continue',
    'update': 'Update',
    'updating': 'Updating...',
    'verifying': 'Verifying...',
    'save': 'Save',
    'saving': 'Saving...',
    'sms_channel': 'SMS Channels',
    'email_channel': 'E-mail',
    'phone_channel': 'Phone Call',
  }
};

export function LanguageProvider({ children }: { children: React.ReactNode }) {
  const [language, setLanguageState] = useState<Language>('tr');

  useEffect(() => {
    // LocalStorage'dan dil tercihini al
    if (typeof window !== 'undefined') {
      const savedLanguage = localStorage.getItem('language') as Language;
      if (savedLanguage && (savedLanguage === 'tr' || savedLanguage === 'en')) {
        setLanguageState(savedLanguage);
      }
    }
  }, []);

  const setLanguage = (lang: Language) => {
    setLanguageState(lang);
    if (typeof window !== 'undefined') {
      localStorage.setItem('language', lang);
      // HTML lang attribute'unu gÃ¼ncelle
      document.documentElement.lang = lang;
    }
  };

  const t = (key: string): string => {
    return translations[language][key as keyof typeof translations[typeof language]] || key;
  };

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  );
}

export function useLanguage() {
  const context = useContext(LanguageContext);
  if (context === undefined) {
    throw new Error('useLanguage must be used within a LanguageProvider');
  }
  return context;
} 